{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Topbar from '../components/Topbar.vue';\nimport Messagesview from '../components/Messagesview.vue';\nimport Navigation from '../components/Navigation.vue';\nimport Message from '../components/Message.vue';\nimport axios from 'axios';\nimport VueCookies from 'vue-cookies';\nexport default {\n  name: 'Home',\n  components: {\n    Navigation,\n    Topbar,\n    Messagesview,\n    Message\n  },\n  mounted() {\n    this.user_id = VueCookies.get('user_id');\n    if (this.$cookies.get('user_id') == null) {\n      this.$router.push('/log_in');\n    }\n    this.requestGetMessages();\n  },\n  data() {\n    return {\n      sideMinimized: false,\n      messageShown: false,\n      msg: null,\n      mail_messages: []\n    };\n  },\n  methods: {\n    toggleSideBar() {\n      this.sideMinimized = !this.sideMinimized;\n    },\n    toggle_msgShown(msg) {\n      this.msg = msg;\n      this.messageShown = !this.messageShown;\n    },\n    async requestGetMessages(page) {\n      const host = \"http://172.20.10.4:8081\";\n      const folderId = 1; // TODO: Replace with the actual folder ID\n      const pageId = page;\n\n      // const sortField = 'message.timestamp';  // TODO: Get from dropdown\n      // const sortDirection = 'desc';           // TODO: direction sort \n      // const searchField = '';                 // TODO: [[criteria]]This is in search bar only\n      // const keyword = '';                     // TODO: search input\n      const url = host + `/api/messages/get/${folderId}?page=${pageId - 1}`;\n      console.log(url);\n      console.log('getting messages..');\n      axios.get(url, {\n        headers: {\n          Authorization: `Bearer ${this.user_id}`\n        }\n      }).then(response => {\n        // Handle the response data\n        console.log(response);\n        this.mail_messages = response.data;\n        console.log('Received messages:', this.mail_messages);\n      }).catch(error => {\n        // Handle errors\n        console.error('Error fetching messages:', error);\n      });\n      console.log('out');\n    }\n  }\n};","map":{"version":3,"names":["Topbar","Messagesview","Navigation","Message","axios","VueCookies","name","components","mounted","user_id","get","$cookies","$router","push","requestGetMessages","data","sideMinimized","messageShown","msg","mail_messages","methods","toggleSideBar","toggle_msgShown","page","host","folderId","pageId","url","console","log","headers","Authorization","then","response","catch","error"],"sources":["/home/moustafa/Me/Projects/Mail/vault_mail/src/views/Home.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <Topbar @toggle-sidebar=\"toggleSideBar\"/>\n    <div class=\"container\">\n      <Navigation :sideMinimized=\"sideMinimized\"/>\n      <Message @close_msg=\"toggle_msgShown\" v-if=\"messageShown\" :message=\"msg\"/>\n      <Messagesview :mail_messages=\"mail_messages\" v-if=\"!messageShown\" @show-mail=\"toggle_msgShown\" @get_messages=\"requestGetMessages\"/>\n    </div>\n    \n  </div>\n</template>\n\n<script>\nimport Topbar from '../components/Topbar.vue'\nimport Messagesview from '../components/Messagesview.vue'\nimport Navigation from '../components/Navigation.vue'\nimport Message from '../components/Message.vue'\nimport axios from 'axios'\nimport VueCookies from 'vue-cookies'\n\nexport default {\n  name: 'Home',\n  components: {\n    Navigation,\n    Topbar,\n    Messagesview,\n    Message\n  },\n  mounted() { \n    this.user_id = VueCookies.get('user_id');\n    if(this.$cookies.get('user_id') == null){\n      this.$router.push('/log_in')\n    }\n\n    this.requestGetMessages()\n  },\n  data() {\n    return{\n      sideMinimized: false,\n      messageShown: false,\n      msg: null,\n      mail_messages: [],\n    }\n  },\n  methods: {\n    toggleSideBar(){\n      this.sideMinimized = !this.sideMinimized\n    },\n    toggle_msgShown(msg){\n      this.msg = msg\n      this.messageShown = !this.messageShown\n    },\n\n    async requestGetMessages(page)\n      {\n        const host = \"http://172.20.10.4:8081\"\n        const folderId = 1; // TODO: Replace with the actual folder ID\n        const pageId = page; \n\n        // const sortField = 'message.timestamp';  // TODO: Get from dropdown\n        // const sortDirection = 'desc';           // TODO: direction sort \n        // const searchField = '';                 // TODO: [[criteria]]This is in search bar only\n        // const keyword = '';                     // TODO: search input\n        const url = host+`/api/messages/get/${folderId}?page=${pageId-1}`;\n        console.log(url)\n        console.log('getting messages..');\n        axios.get(url, {\n          headers: {\n            Authorization: `Bearer ${this.user_id}`\n          }\n        })\n          .then(response => {\n            // Handle the response data\n            console.log(response);\n            this.mail_messages=response.data;\n            console.log('Received messages:', this.mail_messages);\n            \n          })\n          .catch(error => {\n            // Handle errors\n            console.error('Error fetching messages:', error);\n          });\n          console.log('out')\n      },\n  },\n}\n</script>\n\n<style>\n.dashboard {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n\n.container {\n  display: flex;\n  flex: 1;\n}\n</style>"],"mappings":";AAaA,OAAOA,MAAK,MAAO,0BAAyB;AAC5C,OAAOC,YAAW,MAAO,gCAA+B;AACxD,OAAOC,UAAS,MAAO,8BAA6B;AACpD,OAAOC,OAAM,MAAO,2BAA0B;AAC9C,OAAOC,KAAI,MAAO,OAAM;AACxB,OAAOC,UAAS,MAAO,aAAY;AAEnC,eAAe;EACbC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAE;IACVL,UAAU;IACVF,MAAM;IACNC,YAAY;IACZE;EACF,CAAC;EACDK,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,OAAM,GAAIJ,UAAU,CAACK,GAAG,CAAC,SAAS,CAAC;IACxC,IAAG,IAAI,CAACC,QAAQ,CAACD,GAAG,CAAC,SAAS,KAAK,IAAI,EAAC;MACtC,IAAI,CAACE,OAAO,CAACC,IAAI,CAAC,SAAS;IAC7B;IAEA,IAAI,CAACC,kBAAkB,CAAC;EAC1B,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAM;MACJC,aAAa,EAAE,KAAK;MACpBC,YAAY,EAAE,KAAK;MACnBC,GAAG,EAAE,IAAI;MACTC,aAAa,EAAE;IACjB;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,aAAaA,CAAA,EAAE;MACb,IAAI,CAACL,aAAY,GAAI,CAAC,IAAI,CAACA,aAAY;IACzC,CAAC;IACDM,eAAeA,CAACJ,GAAG,EAAC;MAClB,IAAI,CAACA,GAAE,GAAIA,GAAE;MACb,IAAI,CAACD,YAAW,GAAI,CAAC,IAAI,CAACA,YAAW;IACvC,CAAC;IAED,MAAMH,kBAAkBA,CAACS,IAAI,EAC3B;MACE,MAAMC,IAAG,GAAI,yBAAwB;MACrC,MAAMC,QAAO,GAAI,CAAC,EAAE;MACpB,MAAMC,MAAK,GAAIH,IAAI;;MAEnB;MACA;MACA;MACA;MACA,MAAMI,GAAE,GAAIH,IAAI,GAAE,qBAAoBC,QAAS,SAAQC,MAAM,GAAC,CAAE,EAAC;MACjEE,OAAO,CAACC,GAAG,CAACF,GAAG;MACfC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;MACjCzB,KAAK,CAACM,GAAG,CAACiB,GAAG,EAAE;QACbG,OAAO,EAAE;UACPC,aAAa,EAAG,UAAS,IAAI,CAACtB,OAAQ;QACxC;MACF,CAAC,EACEuB,IAAI,CAACC,QAAO,IAAK;QAChB;QACAL,OAAO,CAACC,GAAG,CAACI,QAAQ,CAAC;QACrB,IAAI,CAACd,aAAa,GAACc,QAAQ,CAAClB,IAAI;QAChCa,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE,IAAI,CAACV,aAAa,CAAC;MAEvD,CAAC,EACAe,KAAK,CAACC,KAAI,IAAK;QACd;QACAP,OAAO,CAACO,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD,CAAC,CAAC;MACFP,OAAO,CAACC,GAAG,CAAC,KAAK;IACrB;EACJ;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}