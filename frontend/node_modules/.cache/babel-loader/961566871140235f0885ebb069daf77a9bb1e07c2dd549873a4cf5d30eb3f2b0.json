{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Composer from './Composer.vue';\nimport MessageSum from './MessageSum.vue';\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      isComposing: false,\n      isMoving: false,\n      page: 1,\n      move_to: \"\",\n      total_pages: 10,\n      selected: []\n    };\n  },\n  props: ['mail_messages'],\n  components: {\n    Composer,\n    MessageSum\n  },\n  methods: {\n    toggleCompose() {\n      this.isComposing = !this.isComposing;\n    },\n    increment_page() {\n      if (this.page < this.total_pages) {\n        this.page++;\n      }\n      this.requestGetMessages();\n    },\n    decrement_page() {\n      if (this.page > 1) {\n        this.page--;\n      }\n      this.$emit('get_messages');\n    },\n    isSelected(id) {\n      return this.selected.includes(id);\n    },\n    updateSelectedItems(selectedId) {\n      if (this.isSelected(selectedId)) {\n        this.selected = this.selected.filter(id => id !== selectedId);\n      } else {\n        this.selected.push(selectedId);\n      }\n      console.log(this.selected);\n    },\n    show_mail(mail_id) {\n      const required_mail = this.mail_messages.find(item => item.id === mail_id);\n      console.log(required_mail);\n      this.$emit('show-mail', required_mail);\n    },\n    move() {\n      this.isMoving = !this.isMoving;\n    },\n    move_to_folder() {\n      this.isMoving = !this.isMoving;\n      console.log(this.move_to);\n\n      //To Do\n\n      this.move_to = \"\";\n    },\n    remove_to_trash() {\n      // TODO: to delete selected messages\n      if (!this.selected || this.selected.length > 0) this.requestDeleteMessages(this.selected);\n    },\n    async requestDeleteMessages(selected_msgs) {\n      const folderId = 1; // TODO: Replace with the actual folder ID\n      const url = `http://172.20.10.4:8081/api/messages/delete/${folderId}?msg_ids=${selected_msgs.join(',')}`;\n      console.log(selected_msgs);\n      console.log(url);\n      axios.delete(url).then(response => {\n        // Handle successful deletion\n        console.log('Messages deleted successfully:', response);\n        this.refresh();\n      }).catch(error => {\n        // Handle deletion error\n        console.error('Error deleting messages:', error);\n      });\n    },\n    refresh() {\n      this.selected = [];\n      this.requestGetMessages();\n    }\n  }\n};","map":{"version":3,"names":["Composer","MessageSum","axios","data","isComposing","isMoving","page","move_to","total_pages","selected","props","components","methods","toggleCompose","increment_page","requestGetMessages","decrement_page","$emit","isSelected","id","includes","updateSelectedItems","selectedId","filter","push","console","log","show_mail","mail_id","required_mail","mail_messages","find","item","move","move_to_folder","remove_to_trash","length","requestDeleteMessages","selected_msgs","folderId","url","join","delete","then","response","refresh","catch","error"],"sources":["/home/moustafa/Me/Projects/Mail/vault_mail/src/components/Messagesview.vue"],"sourcesContent":["<template>\n  <div class=\"message_view\">\n    <div class=\"option_bar\">\n      <div class=\"left\">\n        <button @click=\"refresh\" title=\"Refresh\"><font-awesome-icon icon=\"rotate-right\" class=\"icon\"/></button>\n        <button @click=\"select_all\" title=\"Select All\"><font-awesome-icon icon=\"square-check\" class=\"icon\"/></button>\n        <button @click=\"sort\" title=\"Sort\"><font-awesome-icon icon=\"arrow-up-wide-short\" class=\"icon\"/></button>\n        <button @click=\"remove_to_trash\" title=\"Move To Trash\"><font-awesome-icon icon=\"trash-can\" class=\"icon\"/></button>\n        <button @click=\"move\" title=\"Move To Folder \"><font-awesome-icon icon=\"folder\" class=\"icon\"/></button>\n        <div class=\"dropdown_container\">\n          <div v-if=\"isMoving\" class=\"dropdown\" ref=\"dropdown\">\n            <input type=\"text\" v-model=\"move_to\" placeholder=\"Enter Destination Folder\" @keyup.enter=\"move_to_folder\"/>\n          </div>\n      </div>\n      </div>\n      <div class=\"pages\">\n        <button @click=\"decrement_page\" title=\"Back\"><font-awesome-icon icon=\"caret-left\" class=\"icon\"/></button>\n        <span>{{ page }} / {{ total_pages }}</span>\n        <button @click=\"increment_page\" title=\"Forward\"><font-awesome-icon icon=\"caret-right\" class=\"icon\"/></button>\n      </div>\n    </div>\n    <div class=\"grid-container\">\n      <MessageSum v-for=\"message in mail_messages\" :key=\"message\" @show_mail=\"show_mail\" :from=\"message.sender.username\" :subject=\"message.subject.substring(0, 32)\" :date=\"message.time\" :id=\"message.id\" :is-selected=\"isSelected(message.id)\" :priority=\"message.msg_priority\" @update:selected=\"updateSelectedItems\">\n        {{ message.content.substring(0, 100) }}\n      </MessageSum>\n    </div>\n    <button class=\"bottom-right-button\" @click=\"toggleCompose\"><font-awesome-icon icon=\"feather\" /></button>\n  </div>\n  <Composer v-if=\"isComposing\" @close_composer=\"toggleCompose\"/>\n</template>\n\n<script>\n  import Composer from './Composer.vue'\n  import MessageSum from './MessageSum.vue'\n  import axios from 'axios'\n  export default{\n    data(){\n      return{\n        isComposing: false,\n        isMoving: false,\n        page: 1,\n        move_to:\"\",\n        total_pages: 10,\n        selected: [],\n      }\n    },\n    props: ['mail_messages'],\n    components: {\n      Composer,\n      MessageSum\n    },\n    methods: {\n      toggleCompose(){\n        this.isComposing = !this.isComposing\n      },\n      increment_page(){\n        if(this.page < this.total_pages){\n          this.page++\n        }\n        this.requestGetMessages();          \n      },\n      decrement_page(){\n        if(this.page>1){\n          this.page--;\n        }\n        this.$emit('get_messages')          \n      },\n      isSelected(id){\n        return this.selected.includes(id)\n      },\n      updateSelectedItems(selectedId){\n        if(this.isSelected(selectedId)){\n          this.selected = this.selected.filter(id => id !== selectedId)\n        } else{\n          this.selected.push(selectedId)\n        }\n        console.log(this.selected)\n      },\n      show_mail(mail_id){\n        const required_mail = this.mail_messages.find(item => item.id === mail_id)\n        console.log(required_mail)\n        this.$emit('show-mail', required_mail)\n      },\n      move(){\n        this.isMoving = !this.isMoving\n      },\n      move_to_folder(){\n        this.isMoving = !this.isMoving\n        console.log(this.move_to)\n\n        //To Do\n\n        this.move_to = \"\"\n      },\n      remove_to_trash(){\n        // TODO: to delete selected messages\n        if(!this.selected || this.selected.length > 0) \n          this.requestDeleteMessages(this.selected)\n      },\n      async requestDeleteMessages(selected_msgs) {\n        const folderId = 1; // TODO: Replace with the actual folder ID\n        const url = `http://172.20.10.4:8081/api/messages/delete/${folderId}?msg_ids=${selected_msgs.join(',')}`;\n        console.log(selected_msgs)\n        console.log(url)\n        axios.delete(url)\n        .then(response => {\n          // Handle successful deletion\n          console.log('Messages deleted successfully:', response);\n          this.refresh();\n        })\n        .catch(error => {\n          // Handle deletion error\n          console.error('Error deleting messages:', error);\n        });\n      },\n      refresh(){\n        this.selected = []\n        this.requestGetMessages();\n      },\n    },\n}\n</script>\n\n<style>\n.message_view {\n  flex: 1;\n  padding: 0;\n  box-sizing: border-box;\n  background: #c8e1ee;\n  margin-top: 0.1%;\n  margin-right: 1.5%;\n  margin-bottom: 0;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px;\n}\n.message_view .bottom-right-button {\n  position: fixed;\n  bottom: 4%;\n  right: 3%;\n  padding: 25px;\n  background-color: transparent;\n  color: #023047;\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 25px;\n}\n\n.message_view .bottom-right-button:hover{\n  background-color: #FB8500;\n}\n\n\n.message_view .option_bar {\n  background-color: #86b0c7;\n  color: #023047;\n  padding: 0.25% 1.5% 0.25% 0.5%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n}\n\n.message_view .option_bar .left{\n  display: flex;\n \n}\n\n.message_view .option_bar .left button{\n  background: none;\n  cursor: pointer;\n  border: none;\n  padding: 8%;\n  margin: 0 6%;\n}\n.message_view .option_bar .left button:hover{\n  border-radius: 50%;\n  background: #FB8500\n}\n.message_view .option_bar .icon{\n  font-size: 18px;\n  color: #023047;\n}\n.message_view .option_bar .pages{\n  background: rgb(198, 237, 248);\n  padding: 0;\n  display: flex;\n  width: 8%;\n  height: auto;\n  border-radius: 20px;\n  text-align: center;\n}\n\n.message_view .option_bar .pages button{\n  background: none;\n  cursor: pointer;\n  border: none;\n  margin: 0 6%;\n}\n\n.message_view .option_bar .pages button:hover{\n  border-radius: 50%;\n  background: #FB8500\n}\n.message_view .option_bar .pages span{\n    margin-top: 3%;\n    width: 80%;\n}\n\n.grid-container {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-gap: 2%;\n  padding: 1% 1%;\n}\n\n.grid-item {\n  width: 100%;\n  height: 10%;\n  background-color: #3498db;\n  color: #fff;\n  text-align: center;\n  line-height: 50px;\n  font-family: Arial, sans-serif;\n}\n\n.option_bar .dropdown_container{\n  position: absolute;\n  top: 12%;\n  left: 25%;\n}\n.option_bar .dropdown_container .dropdown input{\nheight: 30px;\nwidth: auto;\nfont-size: 16px;\n\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}