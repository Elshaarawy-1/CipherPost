{"ast":null,"code":"import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, withModifiers as _withModifiers, withKeys as _withKeys, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"composer\"\n};\nconst _hoisted_2 = {\n  class: \"bottom\"\n};\nconst _hoisted_3 = {\n  class: \"left\"\n};\nconst _hoisted_4 = {\n  for: \"file-input\",\n  class: \"file-label\"\n};\nconst _hoisted_5 = {\n  class: \"dropdown_container\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"dropdown\",\n  ref: \"dropdown\"\n};\nconst _hoisted_7 = [\"onClick\"];\nexport function render(_ctx, _cache) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"backdrop\",\n    onClick: _cache[8] || (_cache[8] = _withModifiers((...args) => _ctx.close && _ctx.close(...args), [\"self\"]))\n  }, [_createElementVNode(\"div\", _hoisted_1, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.recipients = $event),\n    type: \"text\",\n    class: \"message_attributes\",\n    placeholder: \"Recipients\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.recipients]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.subject = $event),\n    type: \"text\",\n    class: \"message_attributes\",\n    placeholder: \"Subject\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.subject]]), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.mail_message = $event),\n    class: \"message\",\n    onKeydown: _cache[3] || (_cache[3] = _withKeys(_withModifiers((...args) => _ctx.handleTab && _ctx.handleTab(...args), [\"prevent\"]), [\"tab\"])),\n    spellcheck: \"false\",\n    placeholder: \"Type your mail message ...\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, _ctx.mail_message]]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    class: \"send\",\n    title: \"Send\",\n    onClick: _cache[4] || (_cache[4] = (...args) => _ctx.send && _ctx.send(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"paper-plane\",\n    class: \"icon\"\n  })]), _createElementVNode(\"label\", _hoisted_4, [_createVNode(_component_font_awesome_icon, {\n    icon: \"paperclip\",\n    class: \"icon\",\n    title: \"Insert Attachement\"\n  }), _createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"file-input\",\n    onChange: _cache[5] || (_cache[5] = (...args) => _ctx.handleFileChange && _ctx.handleFileChange(...args))\n  }, null, 32 /* NEED_HYDRATION */)]), _ctx.attachements && _ctx.attachements.length > 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"send\",\n    title: \"List Attachements\",\n    onClick: _cache[6] || (_cache[6] = _withModifiers((...args) => _ctx.toggleDropDown && _ctx.toggleDropDown(...args), [\"stop\"]))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"angle-up\",\n    class: \"smaller-icon\"\n  })])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_5, [_ctx.isDropdown ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.attachements, attachement => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: attachement\n    }, [_createTextVNode(_toDisplayString(attachement), 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $event => _ctx.remove_attachement(attachement)\n    }, [_createVNode(_component_font_awesome_icon, {\n      icon: \"minus\"\n    })], 8 /* PROPS */, _hoisted_7)]);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"button\", {\n    class: \"send\",\n    title: \"Discard Draft\",\n    onClick: _cache[7] || (_cache[7] = (...args) => _ctx.discard && _ctx.discard(...args))\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"trash\",\n    class: \"icon\"\n  })])])])]);\n}","map":{"version":3,"names":["class","for","ref","_createElementBlock","onClick","_cache","_withModifiers","args","_ctx","close","_createElementVNode","_hoisted_1","recipients","$event","type","placeholder","subject","mail_message","onKeydown","_withKeys","handleTab","spellcheck","_hoisted_2","_hoisted_3","title","send","_createVNode","_component_font_awesome_icon","icon","_hoisted_4","id","onChange","handleFileChange","attachements","length","toggleDropDown","_hoisted_5","isDropdown","_hoisted_6","_Fragment","_renderList","attachement","key","remove_attachement","discard"],"sources":["/home/moustafa/Me/Projects/Mail/vault_mail/src/components/Composer.vue"],"sourcesContent":["<template>\n  <div class=\"backdrop\" @click.self=\"close\">\n    <div class=\"composer\">\n        <input v-model=\"recipients\" type=\"text\" class=\"message_attributes\" placeholder=\"Recipients\">\n        <input v-model=\"subject\" type=\"text\" class=\"message_attributes\" placeholder=\"Subject\">\n        <textarea v-model=\"mail_message\" class=\"message\" @keydown.tab.prevent=\"handleTab\" spellcheck=\"false\" placeholder=\"Type your mail message ...\"></textarea>\n        <div class=\"bottom\">\n            <div class=\"left\">\n                <button class=\"send\" title=\"Send\" @click=\"send\"><font-awesome-icon icon=\"paper-plane\" class=\"icon\"/></button>\n                <label for=\"file-input\" class=\"file-label\">\n                    <font-awesome-icon icon=\"paperclip\" class=\"icon\" title=\"Insert Attachement\"/>\n                    <input type=\"file\" id=\"file-input\" @change=\"handleFileChange\">\n                </label>\n                <button v-if=\"attachements && attachements.length>0\" class=\"send\" title=\"List Attachements\" @click.stop=\"toggleDropDown\"><font-awesome-icon icon=\"angle-up\" class=\"smaller-icon\"/></button>\n                <div class=\"dropdown_container\">\n                    <div v-if=\"isDropdown\" class=\"dropdown\" ref=\"dropdown\">\n                        <ul>\n                            <li v-for=\"attachement in attachements\" :key=\"attachement\">{{ attachement }}<button @click=\"remove_attachement(attachement)\"><font-awesome-icon icon=\"minus\"/></button></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <button class=\"send\" title=\"Discard Draft\" @click=\"discard\"><font-awesome-icon icon=\"trash\" class=\"icon\"/></button>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n    data(){\n        return{\n            mail_message: \"\",\n            attachements: [],\n            att_count: 0,\n            isDropdown: false,\n        }\n    },\n    mounted() {\n        document.addEventListener(\"click\", this.closeDropdown);\n    },\n    beforeDestroy() {\n        document.removeEventListener(\"click\", this.closeDropdown);\n    },\n    methods: {\n        close(){\n            this.$emit('close_composer');\n        },\n        handleTab(event){\n            const textarea = event.target;\n            const start = textarea.selectionStart;\n            const end = textarea.selectionEnd;\n            \n            this.mail_message = this.mail_message.substring(0, start) + \"\\t\" + this.mail_message.substring(end);\n\n            textarea.setSelectionRange(start + 1, start + 1);\n        },\n        handleFileChange(event){\n            const file= event.target.files[0];\n            this.attachements.push(file);\n            this.att_count++;\n        },\n        formatFileSize(size){\n            const kbSize = size/1024;\n            if(kbSize<1024) {\n                return kbSize.toFixed(2) + 'KB';\n            } else {\n                return (kbSize / 1024).toFixed(2) + 'MB';\n            }\n        },\n\n        toggleDropDown(){\n            this.isDropdown = !this.isDropdown;\n        },\n        closeDropdown(event) {\n            const dropdownElement = this.$refs.dropdown;\n\n            if (dropdownElement && !dropdownElement.contains(event.target)) {\n                this.isDropdown = false;\n            }\n        },\n        remove_attachement(attachement){\n            this.attachements.pop(attachement)\n        }\n        send() {\n\n        },\n        discard(){\n\n        }\n    }\n}\n</script>\n\n<style>\n.backdrop {\n    top: 0;\n    position: fixed;\n    background: rgba(0,0,0,0.6);\n    width: 100%;\n    height: 100%;\n}\n\n.composer {\n    width: 40%;\n    padding: 20px 20px 30px 20px;\n    margin: 150px auto;\n    background: #d6edfa;\n    height: 55%;\n    border-radius: 10px;\n}\n.composer .message_attributes{\n    width: 100%;\n    margin-bottom: 5px;\n    border: none;\n    border-bottom: 1px solid rgba(146, 146, 146, 0.8);\n    background: none;\n}\n\n.composer .message{\n    width:100%;\n    height: 82%;\n    margin-top: 15px;\n    margin-bottom: 0.5%;\n    text-align: left;\n    background: none;\n    border: none;\n    border-bottom: 1px solid rgba(146, 146, 146, 0.8);\n    border-left: 1px solid rgba(146, 146, 146, 0.8);\n    resize: none;\n    overflow-y: auto;\n}\n\n.composer .bottom{\n    display: flex;\n    justify-content: space-between;\n}\n.composer .send{\n    margin-left: 0;\n    height: 40px;\n    width: 40px;\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #023047;\n}\n\n.composer .send:hover{\n    border-radius: 50%;\n    background-color: #FB8500\n}\n.composer .icon{\n    font-size: 20px;\n}\n\n.composer .file-label{\n    padding: 10px;\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #023047;\n}\n.composer .file-label:hover{\n    border-radius: 50%;\n    background-color: #FB8500\n}\n.composer .smaller-icon{\n    font-size: 16px;\n    color: #023047;\n}\n.composer .bottom input[type=\"file\"]{\n    display :none;\n}\n\n.composer .dropdown_container{\n    position: relative;\n    left: 50%;\n    bottom: 95%\n}\n.composer .dropdown_container .dropdown{\n    background: #f7e8c7;\n    border: 1px solid #023047;\n    border-radius: 3%;\n    padding: 0;\n    width: 120px;\n}\n.dropdown ul{\n    padding-left: 10%;\n    list-style: none;\n    text-align: left;\n}\n.dropdown ul li{\n    display: flex;\n    justify-content: space-between;\n}\n.dropdown ul li button{\n    background: none;\n    border: none;\n    cursor: pointer;\n}\n</style>"],"mappings":";;EAESA,KAAK,EAAC;AAAU;;EAIZA,KAAK,EAAC;AAAQ;;EACVA,KAAK,EAAC;AAAM;;EAENC,GAAG,EAAC,YAAY;EAACD,KAAK,EAAC;;;EAKzBA,KAAK,EAAC;AAAoB;;;EACJA,KAAK,EAAC,UAAU;EAACE,GAAG,EAAC;;;;;uBAd9DC,mBAAA,CAwBM;IAxBDH,KAAK,EAAC,UAAU;IAAEI,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAOC,IAAA,CAAAC,KAAA,IAAAD,IAAA,CAAAC,KAAA,IAAAF,IAAA,CAAK;MACtCG,mBAAA,CAsBM,OAtBNC,UAsBM,G,gBArBFD,mBAAA,CAA4F;+DAA5EF,IAAA,CAAAI,UAAU,GAAAC,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACd,KAAK,EAAC,oBAAoB;IAACe,WAAW,EAAC;iDAA/DP,IAAA,CAAAI,UAAU,E,mBAC1BF,mBAAA,CAAsF;+DAAtEF,IAAA,CAAAQ,OAAO,GAAAH,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACd,KAAK,EAAC,oBAAoB;IAACe,WAAW,EAAC;iDAA5DP,IAAA,CAAAQ,OAAO,E,mBACvBN,mBAAA,CAAyJ;+DAAtIF,IAAA,CAAAS,YAAY,GAAAJ,MAAA;IAAEb,KAAK,EAAC,SAAS;IAAEkB,SAAO,EAAAb,MAAA,QAAAA,MAAA,MAAAc,SAAA,CAAAb,cAAA,KAAAC,IAAA,KAAcC,IAAA,CAAAY,SAAA,IAAAZ,IAAA,CAAAY,SAAA,IAAAb,IAAA,CAAS;IAAEc,UAAU,EAAC,OAAO;IAACN,WAAW,EAAC;iEAA9FP,IAAA,CAAAS,YAAY,E,GAC/BP,mBAAA,CAiBM,OAjBNY,UAiBM,GAhBFZ,mBAAA,CAcM,OAdNa,UAcM,GAbFb,mBAAA,CAA6G;IAArGV,KAAK,EAAC,MAAM;IAACwB,KAAK,EAAC,MAAM;IAAEpB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,IAAA,CAAAiB,IAAA,IAAAjB,IAAA,CAAAiB,IAAA,IAAAlB,IAAA,CAAI;MAAEmB,YAAA,CAAoDC,4BAAA;IAAjCC,IAAI,EAAC,aAAa;IAAC5B,KAAK,EAAC;QAC5FU,mBAAA,CAGQ,SAHRmB,UAGQ,GAFJH,YAAA,CAA6EC,4BAAA;IAA1DC,IAAI,EAAC,WAAW;IAAC5B,KAAK,EAAC,MAAM;IAACwB,KAAK,EAAC;MACvDd,mBAAA,CAA8D;IAAvDI,IAAI,EAAC,MAAM;IAACgB,EAAE,EAAC,YAAY;IAAEC,QAAM,EAAA1B,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,IAAA,CAAAwB,gBAAA,IAAAxB,IAAA,CAAAwB,gBAAA,IAAAzB,IAAA,CAAgB;uCAElDC,IAAA,CAAAyB,YAAY,IAAIzB,IAAA,CAAAyB,YAAY,CAACC,MAAM,Q,cAAjD/B,mBAAA,CAA2L;;IAAtIH,KAAK,EAAC,MAAM;IAACwB,KAAK,EAAC,mBAAmB;IAAEpB,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAOC,IAAA,CAAA2B,cAAA,IAAA3B,IAAA,CAAA2B,cAAA,IAAA5B,IAAA,CAAc;MAAEmB,YAAA,CAAyDC,4BAAA;IAAtCC,IAAI,EAAC,UAAU;IAAC5B,KAAK,EAAC;6CAClKU,mBAAA,CAMM,OANN0B,UAMM,GALS5B,IAAA,CAAA6B,UAAU,I,cAArBlC,mBAAA,CAIM,OAJNmC,UAIM,GAHF5B,mBAAA,CAEK,c,kBADDP,mBAAA,CAA4KoC,SAAA,QAAAC,WAAA,CAAlJhC,IAAA,CAAAyB,YAAY,EAA3BQ,WAAW;yBAAtBtC,mBAAA,CAA4K;MAAnIuC,GAAG,EAAED;IAAW,I,kCAAKA,WAAW,kBAAG/B,mBAAA,CAA2F;MAAlFN,OAAK,EAAAS,MAAA,IAAEL,IAAA,CAAAmC,kBAAkB,CAACF,WAAW;QAAGf,YAAA,CAAiCC,4BAAA;MAAdC,IAAI,EAAC;IAAO,G;qGAK5KlB,mBAAA,CAAmH;IAA3GV,KAAK,EAAC,MAAM;IAACwB,KAAK,EAAC,eAAe;IAAEpB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,IAAA,CAAAoC,OAAA,IAAApC,IAAA,CAAAoC,OAAA,IAAArC,IAAA,CAAO;MAAEmB,YAAA,CAA8CC,4BAAA;IAA3BC,IAAI,EAAC,OAAO;IAAC5B,KAAK,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}